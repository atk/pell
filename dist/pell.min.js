!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.pell={})}(this,function(e){"use strict";var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return document.execCommand(e,!1,t)},f={bold:{icon:"<b>B</b>",title:"Bold",state:function(){return document.queryCommandState("bold")},result:function(){return s("bold")}},italic:{icon:"<i>I</i>",title:"Italic",state:function(){return document.queryCommandState("italic")},result:function(){return s("italic")}},underline:{icon:"<u>U</u>",title:"Underline",state:function(){return document.queryCommandState("underline")},result:function(){return s("underline")}},strikethrough:{icon:"<strike>S</strike>",title:"Strike-through",state:function(){return document.queryCommandState("strikeThrough")},result:function(){return s("strikeThrough")}},heading1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:function(){return s("formatBlock","<h1>")}},heading2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:function(){return s("formatBlock","<h2>")}},paragraph:{icon:"&#182;",title:"Paragraph",result:function(){return s("formatBlock","<p>")}},quote:{icon:"&#8220; &#8221;",title:"Quote",result:function(){return s("formatBlock","<blockquote>")}},olist:{icon:"&#35;",title:"Ordered List",result:function(){return s("insertOrderedList")}},ulist:{icon:"&#8226;",title:"Unordered List",result:function(){return s("insertUnorderedList")}},code:{icon:"&lt;/&gt;",title:"Code",result:function(){return s("formatBlock","<pre>")}},line:{icon:"&#8213;",title:"Horizontal Line",result:function(){return s("insertHorizontalRule")}},link:{icon:"&#128279;",title:"Link",result:function(){var e=window.prompt("Enter the link URL");e&&s("createLink",e)}},image:{icon:"&#128247;",title:"Image",result:function(){var e=window.prompt("Enter the image URL");e&&s("insertImage",e)}}},m={actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"},t=function(n){var r=(n.actions||Object.keys(f)).map(function(e){return e+""===e?f[e]:f[e.name]?d({},f[e.name]):e}),i=d({},m,n.classes),o=n.defaultParagraphSeparator||"div",u=n.element.content=document.createElement("div");u.contentEditable=!0,u.className=i.content;var l=document.createElement("div");l.className=i.actionbar;var e=function(e){var t=e.target.firstChild;t&&3===t.nodeType?s("formatBlock","<"+o+">"):"<br>"===u.innerHTML&&(u.innerHTML=""),n.onChange(u.innerHTML)},t=function(e){"Tab"===e.key?e.preventDefault():"Enter"===e.key&&"blockquote"===document.queryCommandValue("formatBlock")&&setTimeout(function(){return s("formatBlock","<"+o+">")},0)},a=function(){r.forEach(function(e){var t=e.state&&l.querySelector('[title="'+e.title+'"]');t&&t.classList[e.state()?"add":"remove"](i.selected)})},c=function(t){var e=r.find(function(e){return t.target.title===e.title});e&&e.result.call(u)&&u.focus(),a()};return u.addEventListener("input",e),u.addEventListener("keydown",t),u.addEventListener("keyup",a),l.addEventListener("click",c),n.element.appendChild(l),n.element.appendChild(u),r.forEach(function(e){var t=document.createElement("button");t.className=i.button,t.innerHTML=e.icon,t.title=e.title,t.setAttribute("type","button"),l.appendChild(t)}),n.styleWithCSS&&s("styleWithCSS"),s("defaultParagraphSeparator",o),n.element.destroy=function(){u.removeEventListener("input",e),u.removeEventListener("keydown",t),u.removeEventListener("keyup",a),l.removeEventListener("click",c),n.element.removeChild(u),n.element.removeChild(l)},n.element},n={exec:s,init:t};e.exec=s,e.init=t,e.default=n,Object.defineProperty(e,"__esModule",{value:!0})});
